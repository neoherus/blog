/*! heading-navigation v1.0.0 | (c) 2018  | MIT License | https://github.com/vimcaw/heading-navigation */
function $(e){return document.querySelector(e)}function $$(e){return document.querySelectorAll(e)}HTMLCollection.prototype.forEach=function(e){for(var t=0;t<this.length&&!1!==e(this[t],t);t++);},Element.prototype.addClass=function(e){""===this.className?this.className=e:this.className+=" "+e},Element.prototype.removeClass=function(e){var t=new RegExp("^"+e+"$|^"+e+" +| +"+e+"$| +"+e+" +");return!!this.className.match(t)&&(this.className=this.className.replace(t,""),!0)},Element.prototype.getPosTop=function(){for(var e=this.offsetTop,t=this.offsetParent;null!==t;)e+=t.offsetTop,t=t.offsetParent;return e};var hNav=function(){var e,t,n=null,l=null,o=null;function r(){var t=document.getElementsByTagName("h1"),l=window.innerHeight;var r,a,i=document.documentElement.scrollTop;if(a=l*e,document.documentElement.scrollTop+a<t[0].getPosTop()||(r=l*e,document.documentElement.scrollTop+r>o.getPosTop()+o.offsetHight))return n&&n.removeClass("current"),void(n=null);t.forEach(function(t){if(!(i+l*e>=t.getPosTop()))return!1;n&&n.innerText===t.innerText||(n&&n.removeClass("current"),(n=$('a[title="'+t.innerText+'"]'))&&n.addClass("current"))})}return{init:function(n){n.sidebar&&(l=$(n.sidebar)),n.article&&(o=$(n.article)),e=n.offsetRate||.4,t=n.maxLevel>=1&&n.maxLevel<=5?n.maxLevel:1,Boolean(n.addToHistory),l.appendChild(function(){var e=document.createElement("ul");function n(e,t){var n=document.createElement("li"),l=document.createElement("a");return e.id=e.innerText.replace(/ /g,"-"),l.innerText=e.innerText,l.href="#"+e.id,l.title=e.innerText,l.dataset.scroll="",n.appendChild(l),n.className="hNav-"+t,n}for(var l=1;l<=t;l++){var o=-1;k=1,iul=null,a=0,$$("h"+l).forEach(function(t,r){if(1===l)e.appendChild(n(t,l));else{var i=$$("h"+(l-1));for(k--;t.getPosTop()>=i[k].getPosTop();k++);console.log("level"+l+", index: "+a+++", k:"+k),k-1!==o&&(iul&&e.getElementsByClassName("hNav-"+(l-1))[o].appendChild(iul),o=k-1,iul=document.createElement("ul")),iul.appendChild(n(t,l)),r===$$("h"+l).length-1&&iul&&e.getElementsByClassName("hNav-"+(l-1))[o].appendChild(iul)}}),a=0}return e.addClass("hNav"),e}()),r(),window.addEventListener("scroll",function(){r()}),new SmoothScroll('a[href*="#"]')}}}();